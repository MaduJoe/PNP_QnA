# PNP QnA Bot 웹 대시보드 사용 가이드

## 🚀 웹 대시보드 소개

PNP QnA Bot을 위한 실시간 웹 대시보드가 추가되었습니다! 이제 브라우저에서 편리하게 질의 로그를 모니터링하고 분석할 수 있습니다.

![대시보드 스크린샷](dashboard_preview.png)

## 🌟 주요 기능

### 📊 실시간 통계 대시보드
- **총 질의 수**: 전체 누적 질의 통계
- **고유 사용자**: 실제 사용자 수 추적
- **평균 응답시간**: 시스템 성능 모니터링
- **최근 1시간**: 실시간 활동량 추적

### 📈 시각화 차트
- **시간대별 질의 패턴**: 24시간 사용 패턴 분석
- **일별 질의 추이**: 트렌드 분석 및 예측
- **카테고리별 통계**: Product QnA vs Bugs QnA 비교
- **인기 키워드**: 가장 많이 검색된 질의어 워드클라우드

### 🔍 고급 검색 및 필터링
- **실시간 검색**: 질의 내용으로 즉시 검색
- **키워드 하이라이트**: 검색어 강조 표시
- **결과 수 조절**: 20/50/100개씩 보기
- **상세 보기**: 모달 창으로 질의 결과 확인

### 📥 데이터 내보내기
- **CSV 내보내기**: Excel/Google Sheets에서 분석 가능
- **기간별 필터**: 1일/7일/30일/90일 선택
- **실시간 다운로드**: 즉시 파일 생성

## 🛠️ 설치 및 실행

### 1. 기본 요구사항

웹 대시보드를 실행하기 전에 다음 사항들이 준비되어 있어야 합니다:

- ✅ PNP QnA Bot이 설치되어 있음
- ✅ 질의 로깅 시스템이 활성화되어 있음 (`config.yaml`에서 `query_logging.enabled: true`)
- ✅ Flask 패키지가 설치되어 있음

### 2. 간편 실행

```bash
# 가상환경 활성화
source .qna_env/bin/activate

# 웹 대시보드 실행
python3 run_dashboard.py
```

### 3. 수동 실행

```bash
# 가상환경 활성화
source .qna_env/bin/activate

# Flask 앱 직접 실행
python3 dashboard_app.py
```

### 4. 실행 확인

대시보드가 성공적으로 실행되면:
- 브라우저가 자동으로 열립니다
- URL: `http://localhost:8080`
- 3초 후 자동으로 브라우저에서 대시보드 페이지가 열립니다

## 📱 사용 방법

### 1. 메인 대시보드 (`/`)

**실시간 통계 카드**
- 4개의 주요 지표를 한눈에 확인
- 30초마다 자동 업데이트
- 컬러 코딩으로 직관적 구분

**분석 기간 선택**
- 드롭다운에서 기간 선택 (1일/7일/30일/90일)
- 실시간 새로고침 버튼
- CSV 내보내기 원클릭

**시각화 차트**
- **시간대별 패턴**: 언제 가장 많이 사용되는지 확인
- **일별 추이**: 성장 트렌드 분석
- 반응형 디자인으로 모바일에서도 확인 가능

**카테고리별 분석**
- Product QnA vs Bugs QnA 결과 수 비교
- 각 카테고리별 평균 응답시간
- 사용 패턴 분석

**인기 질의 키워드**
- 사용 빈도에 따른 크기 조절
- 클릭 가능한 배지 형태
- 트렌드 키워드 즉시 파악

**최근 질의 목록**
- 실시간으로 업데이트되는 최신 10개 질의
- 사용자 정보, 결과 수, 응답시간 표시
- 질의 클릭 시 상세 페이지로 이동

### 2. 질의 목록 페이지 (`/queries`)

**검색 및 필터**
- 실시간 검색으로 즉시 결과 확인
- 검색어 하이라이트 기능
- 결과 수 조절 (20/50/100개)
- 검색 초기화 버튼

**질의 테이블**
- 정렬 가능한 컬럼들
- 클릭 가능한 행
- 배지로 구분된 정보 표시
- 반응형 테이블 디자인

**상세 보기 모달**
- 클릭 시 즉시 로딩
- Product QnA와 Bugs QnA 결과 분리 표시
- 외부 링크로 원본 페이지 접근
- 종합 점수와 카테고리 정보

### 3. 실시간 모니터링

**자동 업데이트**
- 30초마다 실시간 통계 자동 갱신
- 실시간 표시등 (녹색 점)
- 새로운 질의 즉시 반영

**실시간 알림**
- 토스트 알림으로 상태 메시지 표시
- 성공/오류/경고 메시지 구분
- 자동 사라지는 알림

## 🎨 사용자 인터페이스

### 디자인 특징
- **모던한 Bootstrap 5** 기반 디자인
- **반응형 웹디자인**으로 모바일 친화적
- **다크/라이트 테마** 자동 감지
- **직관적 아이콘**과 색상 코딩
- **부드러운 애니메이션** 효과

### 접근성 Features
- 키보드 네비게이션 지원
- 고대비 색상 사용
- 스크린 리더 호환
- 모바일 터치 최적화

## 🔧 고급 활용

### 1. API 엔드포인트 활용

웹 대시보드는 REST API를 제공하므로 직접 호출도 가능합니다:

```javascript
// 통계 데이터 가져오기
fetch('/api/stats?days=7')
  .then(response => response.json())
  .then(data => console.log(data));

// 최근 질의 가져오기
fetch('/api/recent_queries?limit=20')
  .then(response => response.json())
  .then(data => console.log(data));

// 검색 수행
fetch('/api/search_queries?keyword=로그인&limit=10')
  .then(response => response.json())
  .then(data => console.log(data));
```

### 2. 데이터 분석 워크플로우

**1단계: 대시보드에서 트렌드 파악**
- 시간대별/일별 패턴 확인
- 인기 키워드 식별
- 응답시간 성능 모니터링

**2단계: 질의 목록에서 상세 분석**
- 특정 키워드로 검색
- 결과가 없는 질의 식별
- 사용자별 패턴 분석

**3단계: CSV 내보내기로 심화 분석**
- Excel/Google Sheets에서 피벗 테이블 생성
- 통계 분석 수행
- 보고서 작성

### 3. 모니터링 활용 사례

**서비스 품질 모니터링**
- 평균 응답시간 추이 관찰
- 에러 발생 패턴 분석
- 사용량 증가 추세 파악

**컨텐츠 개선**
- 검색 결과가 없는 질의 파악
- 자주 묻는 질문 식별
- 카테고리별 만족도 비교

**사용자 행동 분석**
- 시간대별 사용 패턴
- 반복 사용자 식별
- 인기 키워드 트렌드

## 🚨 문제해결

### 일반적인 문제들

**1. 대시보드가 열리지 않는 경우**
```bash
# 포트 8080이 사용 중인지 확인
netstat -an | grep 8080

# 다른 포트로 실행
python3 dashboard_app.py
# 그리고 app.run()의 port 값을 8081로 변경
```

**2. 데이터가 표시되지 않는 경우**
- QnA 봇이 실행되고 있는지 확인
- `query_logs.db` 파일이 존재하는지 확인
- `config.yaml`에서 `query_logging.enabled: true` 확인

**3. 차트가 로딩되지 않는 경우**
- 인터넷 연결 확인 (Chart.js CDN)
- 브라우저 개발자 도구에서 JavaScript 오류 확인
- 브라우저 캐시 삭제 후 새로고침

**4. CSV 내보내기가 실패하는 경우**
- pandas 패키지 설치 확인: `pip install pandas`
- 디스크 공간 확인
- 파일 쓰기 권한 확인

### 성능 최적화

**대용량 데이터 처리**
- 기간 필터를 사용하여 로딩 시간 단축
- 브라우저 캐시 활용
- 필요시 데이터베이스 인덱스 추가

**메모리 사용량 최적화**
- 주기적으로 오래된 로그 정리
- SQLite 데이터베이스 최적화
- 불필요한 브라우저 탭 정리

## 🔒 보안 고려사항

### 접근 제어
현재 버전은 로컬 네트워크에서만 접근 가능하도록 설정되어 있습니다.

**외부 접근을 허용하려면:**
```python
# dashboard_app.py에서
app.run(host='0.0.0.0', port=8080, debug=False)
```

**보안 강화 방법:**
- 방화벽 설정으로 특정 IP만 허용
- HTTPS 적용 (SSL 인증서 필요)
- 인증 시스템 추가 (로그인 기능)
- API 키 기반 접근 제어

### 데이터 보호
- 사용자 ID는 이미 암호화된 형태로 저장
- 질의 내용은 평문으로 저장되므로 민감 정보 주의
- 정기적인 백업 수행

## 🚀 확장 가능성

### 추가 기능 아이디어
- **알림 시스템**: 특정 조건 만족 시 이메일/슬랙 알림
- **대시보드 커스터마이징**: 사용자별 위젯 설정
- **고급 분석**: 머신러닝 기반 트렌드 예측
- **다중 언어 지원**: 국제화(i18n) 적용
- **실시간 협업**: 여러 사용자가 동시에 모니터링

### 시스템 통합
- **Grafana 연동**: 더 전문적인 모니터링
- **Elasticsearch 연동**: 대용량 로그 검색
- **Slack/Teams 연동**: 실시간 알림
- **Google Analytics 연동**: 웹 분석

---

## 📞 지원 및 문의

웹 대시보드 사용 중 문제가 발생하거나 추가 기능이 필요하시면 언제든 문의해 주세요!

**주요 단축키:**
- `Ctrl + R`: 페이지 새로고침
- `Ctrl + F`: 브라우저 내 검색
- `Esc`: 모달 창 닫기

**유용한 팁:**
- 모바일에서도 모든 기능 사용 가능
- 북마크에 추가하여 빠른 접근
- 여러 탭으로 동시 모니터링 가능

즐거운 모니터링 되세요! 🎉 